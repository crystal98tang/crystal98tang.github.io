---
layout: post
title: JavaEE容器与注入机制
date: 2019-03-10
categories: 
  - JAVA
  - JavaEE
tags:
  - container
  - inject
---

==第二周WEB JAVA作业（3）==

<!-- more -->

### 容器

　　通常，瘦客户机多层应用程序很难编写，因为它们涉及许多行复杂的代码来处理事务和状态管理、多线程、资源池和其他复杂的底层细节。基于组件且独立于平台的Java EE体系结构使应用程序易于编写，因为业务逻辑被组织成可重用的组件。此外，Java EE服务器以容器的形式为每种组件类型提供底层服务。因为您不必亲自开发这些服务，所以您可以自由地集中精力解决手头的业务问题。

### 容器服务

　　容器是组件与支持组件的底层特定于平台的功能之间的接口。在执行之前，必须将web、企业bean或应用程序客户机组件组装到Java EE模块中并部署到其容器中。组装过程涉及为Java EE应用程序中的每个组件和Java EE应用程序本身指定容器设置。容器设置自定义Java EE服务器提供的底层支持，包括安全性、事务管理、Java命名和目录接口API查找以及远程连接等服务。以下是一些亮点。

　　·Java EE安全模型允许您配置web组件或企业bean，以便只有授权用户才能访问系统资源。

　　·Java EE事务模型允许您指定组成单个事务的方法之间的关系，以便将一个事务中的所有方法视为单个单元。

　　·JNDI查找服务为企业中的多个命名和目录服务提供了统一的接口，以便应用程序组件能够访问这些服务。

　　·Java EE远程连接模型管理客户机和企业bean之间的底层通信。创建企业bean之后，客户机调用它的方法，就好像它在同一虚拟机中一样。

　　由于Java EE体系结构提供了可配置的服务，同一应用程序中的组件可以根据其部署位置进行不同的行为。例如，企业bean可以有安全设置，允许它在一个生产环境中具有一定级别的数据库数据访问权限，在另一个生产环境中具有一定级别的数据库访问权限。

 　  容器还管理不可配置的服务，如企业bean和servlet生命周期、数据库连接资源池、数据持久性和对Java EE平台api的访问(请参阅Java EE 8 api)。

### 容器种类

　　部署流程在Java EE容器中安装Java EE应用程序组件，如图1-5所示。

　　　　![](https://img2018.cnblogs.com/blog/1611675/201903/1611675-20190310205119779-2138089548.png)

服务器和容器如下:

 　　·Java EE server: Java EE产品的运行时部分。Java EE服务器提供EJB和web容器。

 　　·EJB容器:管理用于Java EE应用程序的企业bean的执行。企业bean及其容器运行在Java EE服务器上。

 　　·Web容器:管理用于Java EE应用程序的Web页面、servlet和一些EJB组件的执行。Web组件及其容器运行在Java EE服务器上。

 　　·应用程序客户机容器:管理应用程序客户机组件的执行。应用程序客户机及其容器在客户机上运行。

 　　·Applet容器:管理Applet的执行。由一个web浏览器和一个同时运行在客户机上的Java插件组成。

### 注入

　　Java EE提供了注入机制，使您的对象能够获得对资源和其他依赖项的引用，而无需直接实例化它们。通过使用将字段标记为注入点的注释之一装饰字段或方法，您可以在类中声明所需的资源和其他依赖项。然后容器在运行时提供所需的实例。注入简化了代码，并将其与依赖项的实现解耦。

### 资源注入

　　资源注入使您能够将JNDI名称空间中可用的任何资源注入到任何容器管理的对象中，像是servlet、企业bean或托管bean。例如，可以使用资源注入注入JNDI名称空间中可用的数据源、连接器或自定义资源。

　　用于引用注入实例的类型通常是一个接口，它将代码与资源的实现解耦。

　　要使用基于方法的注入，setter方法必须遵循属性名的javabean约定:方法名必须以set开头，具有void返回类型，并且只有一个参数。@Resource注释在javax.annotation包中，它在JSR 250 (Java平台的公共注释)中定义。资源注入按名称解析，所以它不是类型安全:资源对象的类型在编译时不知道，所以如果对象的类型与其引用不匹配，就会得到运行时错误。

### 依赖注入

　　依赖项注入使您能够将常规Java类转换为托管对象，并将它们注入到任何其他托管对象中。使用依赖项注入，您的代码可以声明对任何托管对象的依赖项。容器在运行时的注入点自动提供这些依赖项的实例，并且它还为您管理这些实例的生命周期。Java EE中的依赖注入定义了作用域，它决定容器实例化和注入的对象的生命周期。例如，只需要响应单个客户机请求(例如货币转换器)的托管对象与需要在会话(例如购物车)中处理多个客户机请求的托管对象具有不同的作用域。

　　与资源注入相反，依赖项注入是类型安全的，因为它按类型解析。要将代码与托管bean的实现解耦，可以使用接口类型引用注入的实例，并让托管bean实现该接口。

 　　有关依赖项注入的更多信息，请参见第25章“Java EE上下文和依赖项注入的介绍”和JSR 299 (Java EE平台上下文和依赖项注入)。
